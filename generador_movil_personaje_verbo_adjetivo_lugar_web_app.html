<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Generador: Personaje Verbo Adjetivo Lugar</title>
  <meta name="theme-color" content="#0ea5e9" />
  <style>
    :root{--bg:#0b1020;--panel:#111a2b;--muted:#99a3b4;--text:#e7eefc;--accent:#0ea5e9;--accent2:#22c55e}
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial; color:var(--text); background:linear-gradient(180deg,#0b1020,#0b1428) fixed;}
    header{position:sticky;top:0;background:rgba(9,13,26,.7);backdrop-filter:blur(8px);border-bottom:1px solid rgba(255,255,255,.05);z-index:10}
    .container{max-width:820px;margin:0 auto;padding:16px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02)); border:1px solid rgba(255,255,255,.08); border-radius:16px; padding:16px; box-shadow:0 6px 30px rgba(0,0,0,.25)}
    .title{font-size:20px; font-weight:700; display:flex; gap:10px; align-items:center}
    .muted{color:var(--muted)}
    .btn{appearance:none;border:0;border-radius:12px;padding:12px 14px;font-weight:700;color:#0b1020;background:var(--accent);box-shadow:0 6px 18px rgba(14,165,233,.35);cursor:pointer}
    .btn:active{transform:translateY(1px)}
    .btn.ghost{background:transparent;color:var(--text);border:1px solid rgba(255,255,255,.12)}
    .btn.success{background:var(--accent2);box-shadow:0 6px 18px rgba(34,197,94,.35)}
    .inline{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
    input{width:100%;background:#0f182a;color:var(--text);border:1px solid rgba(255,255,255,.14);border-radius:12px;padding:10px 12px}
    .out{font-size:22px;line-height:1.45;background:#0b1426;border-radius:14px;padding:14px;border:1px dashed rgba(255,255,255,.15)}
    footer{opacity:.7;padding:24px 12px;text-align:center;font-size:12px}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace; font-size:12px;border:1px solid rgba(255,255,255,.2); padding:2px 6px;border-radius:6px;background:#0e1628}
    .pill{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:30px;border:1px solid rgba(255,255,255,.14);background:#0d1830;font-size:12px}
    .tag{padding:.2rem .5rem;border:1px solid rgba(255,255,255,.18);border-radius:999px;margin-right:.35rem;font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <div class="container inline" style="justify-content:space-between">
      <div class="title">ðŸŽ² Generador de Enunciados <span class="muted">(Orden fijo por modo)</span></div>
      <div class="inline">
        <label class="pill" for="seed">Semilla</label>
        <input id="seed" placeholder="opcional" style="max-width:140px" />
      </div>
    </div>
  </header>

  <main class="container" style="padding-top:18px">
    <section class="card">
      <div style="display:grid; gap:10px">
        <div class="inline">
          <button class="btn" id="btnPVAL">P + V + A + L</button>
          <button class="btn ghost" id="btnPV">P + V</button>
          <button class="btn ghost" id="btnPA">P + A</button>
          <button class="btn ghost" id="btnPL">P + L</button>
        </div>
        <div class="inline">
          <button class="btn ghost" id="btnGenerar5">Generar 5</button>
          <button class="btn success" id="btnCopiar">Copiar</button>
          <button class="btn ghost" id="btnTest">Test</button>
        </div>
      </div>
      <div class="muted" style="margin-top:10px">Los adjetivos usan <span class="kbd">@</span> para gÃ©nero neutro/variable (se conserva tal cual).</div>
    </section>

    <section class="card" style="margin-top:14px">
      <div class="title">Salida</div>
      <div id="salida" class="out" style="margin-top:10px; white-space:pre-wrap"></div>
      <div id="historial" style="margin-top:10px"></div>
      <div id="testlog" class="muted" style="margin-top:10px"></div>
    </section>
  </main>

  <footer>Hecho para mÃ³vil y desktop. Atajos: <span class="kbd">Ctrl/Cmd + 1</span> (PVAL), <span class="kbd">+2</span> (PV), <span class="kbd">+3</span> (PA), <span class="kbd">+4</span> (PL)</footer>

  <script>
    // ===== Datos fijos =====
    const PERSONAJES = [
      'Goku','Vegeta','Piccolo','Freezer','Monkey D. Luffy','Roronoa Zoro','Sanji','Nami',
      'Naruto Uzumaki','Sasuke Uchiha','Kakashi Hatake','Ichigo Kurusaki'
    ];
    const VERBOS = [
      'leyendo','patinando','esquiando','surfeando','navegando','cabalgando','pedaleando','nadando',
      'bailando','pescando','regando','componiendo'
    ];
    const ADJETIVOS = [
      'content@','enojad@','asustad@','preocupad@','desnud@','cansad@','confundid@','excitad@',
      'aburrid@','sorprendid@','doblad@','sentad@'
    ];
    const LUGARES = [
      'bajo el agua','bajo el sol','bajo la luna','bajo la lluvia','bajo la tierra','bajo las estrellas',
      'bajo un Ã¡rbol','bajo un puente','sobre un tren','sobre una torre','sobre una cama','sobre una mesa'
    ];

    // ===== Utilidades =====
    const byId = (id)=>document.getElementById(id);
    function mulberry32(a){return function(){let t=a+=0x6D2B79F5;t=Math.imul(t^t>>>15,t|1);t^=t+Math.imul(t^t>>>7,t|61);return ((t^t>>>14)>>>0)/4294967296}};
    function rng(seed){if(!seed) return Math.random; let n=0; for(let i=0;i<seed.length;i++) n = (n*31 + seed.charCodeAt(i))>>>0; return mulberry32(n)}
    const pick = (arr,R)=> arr[Math.floor(R()*arr.length)]

    // ===== GeneraciÃ³n =====
    function genPVAL(R){ return `${pick(PERSONAJES,R)} ${pick(VERBOS,R)} ${pick(ADJETIVOS,R)} ${pick(LUGARES,R)}` }
    function genPV(R){ return `${pick(PERSONAJES,R)} ${pick(VERBOS,R)}` }
    function genPA(R){ return `${pick(PERSONAJES,R)} ${pick(ADJETIVOS,R)}` }
    function genPL(R){ return `${pick(PERSONAJES,R)} ${pick(LUGARES,R)}` }

    const recent = []
    function generarUno(mode){
      const R = rng((byId('seed').value||'').trim())
      if(mode==='PV') return genPV(R)
      if(mode==='PA') return genPA(R)
      if(mode==='PL') return genPL(R)
      return genPVAL(R)
    }

    function generarN(mode, n){
      const R = rng((byId('seed').value||'').trim())
      const gens = {PVAL:genPVAL, PV:genPV, PA:genPA, PL:genPL}
      const fn = gens[mode] || genPVAL
      const out = Array.from({length:n}, ()=>fn(R))
      byId('salida').textContent = out.join('\n')
      recent.push(...out); renderHistorial()
    }

    function renderHistorial(){
      const last = recent.slice(-10).reverse()
      byId('historial').innerHTML = last.length? (`<div class="muted" style="margin-top:6px">Ãšltimos (${last.length}):</div>` + last.map(x=>`<span class="tag">${x}</span>`).join('')): ''
    }

    // ===== UI =====
    byId('btnPVAL').onclick = ()=>generarN('PVAL', 1)
    byId('btnPV').onclick   = ()=>generarN('PV',   1)
    byId('btnPA').onclick   = ()=>generarN('PA',   1)
    byId('btnPL').onclick   = ()=>generarN('PL',   1)
    byId('btnGenerar5').onclick = ()=>{
      // Genera 5 en el modo actualmente mÃ¡s reciente; por simplicidad usamos PVAL por defecto
      generarN('PVAL', 5)
    }
    byId('btnCopiar').onclick = async()=>{ const t = byId('salida').textContent; if(!t) return; await navigator.clipboard.writeText(t); byId('btnCopiar').textContent='Â¡Copiado!'; setTimeout(()=>byId('btnCopiar').textContent='Copiar',900) }

    document.addEventListener('keydown', (e)=>{
      if((e.metaKey||e.ctrlKey)){
        if(e.key==='1'){ e.preventDefault(); generarN('PVAL',1) }
        if(e.key==='2'){ e.preventDefault(); generarN('PV',1) }
        if(e.key==='3'){ e.preventDefault(); generarN('PA',1) }
        if(e.key==='4'){ e.preventDefault(); generarN('PL',1) }
      }
    })

    // ===== Tests =====
    function escapeReg(s){return s.replace(/[.*+?^${}()|[\]\\]/g,'\\$&')}
    function rxUnion(list){ return list.map(escapeReg).join('|') }
    const RX = {
      PVAL: new RegExp(`^(?:${rxUnion(PERSONAJES)}) (?:${rxUnion(VERBOS)}) (?:${rxUnion(ADJETIVOS)}) (?:${rxUnion(LUGARES)})$`),
      PV:   new RegExp(`^(?:${rxUnion(PERSONAJES)}) (?:${rxUnion(VERBOS)})$`),
      PA:   new RegExp(`^(?:${rxUnion(PERSONAJES)}) (?:${rxUnion(ADJETIVOS)})$`),
      PL:   new RegExp(`^(?:${rxUnion(PERSONAJES)}) (?:${rxUnion(LUGARES)})$`),
    }

    function selfTest(){
      let report = 'Pruebas:'
      const modes = ['PVAL','PV','PA','PL']
      for(const m of modes){
        const R = rng('test-'+m)
        let ok = 0, total = 100
        for(let i=0;i<total;i++){
          const s = (m==='PVAL'?genPVAL: m==='PV'?genPV: m==='PA'?genPA: genPL)(R)
          if(RX[m].test(s)) ok++
        }
        report += `\nâ€¢ ${m}: formato vÃ¡lido ${ok}/${total}`
      }
      byId('testlog').textContent = report
    }
    byId('btnTest').onclick = selfTest

    // Inicio: muestra uno PVAL
    generarN('PVAL', 1)
  </script>
</body>
</html>
